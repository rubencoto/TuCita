# ?? CHEATSHEET - Despliegue TuCita

## ?? PRIMER DESPLIEGUE (Hacer UNA SOLA VEZ)

```batch
???????????????????????????????????????????????
?  1. Abrir CMD en la raíz del proyecto      ?
???????????????????????????????????????????????
cd C:\Users\ruben\source\repos\rubencoto\TuCita

???????????????????????????????????????????????
?  2. Ejecutar script de configuración       ?
???????????????????????????????????????????????
deploy-to-heroku.bat

???????????????????????????????????????????????
?  3. Seguir las instrucciones en pantalla   ?
???????????????????????????????????????????????
(Ingresar credenciales cuando se soliciten)

???????????????????????????????????????????????
?  4. Desplegar a Heroku                     ?
???????????????????????????????????????????????
git add .
git commit -m "Deploy inicial"
git push heroku master

???????????????????????????????????????????????
?  5. Verificar despliegue                   ?
???????????????????????????????????????????????
verify-deployment.bat
```

**?? Tiempo total: ~30-45 minutos**

---

## ?? ACTUALIZAR LA APP (Después del primer despliegue)

```batch
???????????????????????????????????????????????
?  Opción 1: Usar el script (RECOMENDADO)    ?
???????????????????????????????????????????????
update-app.bat

???????????????????????????????????????????????
?  Opción 2: Manual                          ?
???????????????????????????????????????????????
git add .
git commit -m "Descripción de cambios"
git push heroku master
```

**?? Tiempo de actualización: ~5-10 minutos**

---

## ?? COMANDOS ESENCIALES

```batch
??????????????????????????????????????????????????????????????
?  ACCIÓN              ?  COMANDO                            ?
??????????????????????????????????????????????????????????????
?  Ver logs            ?  heroku logs --tail -a tucita-app   ?
?  Abrir app           ?  heroku open -a tucita-app          ?
?  Reiniciar app       ?  heroku restart -a tucita-app       ?
?  Ver variables       ?  heroku config -a tucita-app        ?
?  Ver dominios        ?  heroku domains -a tucita-app       ?
?  Ver SSL             ?  heroku certs:auto -a tucita-app    ?
?  Ver estado          ?  heroku ps -a tucita-app            ?
?  Verificar todo      ?  verify-deployment.bat              ?
??????????????????????????????????????????????????????????????
```

---

## ?? SOLUCIÓN DE PROBLEMAS

```batch
??????????????????????????????????????????????????????????????
?  PROBLEMA: Build falla                                     ?
??????????????????????????????????????????????????????????????
?  SOLUCIÓN:                                                 ?
?  1. heroku builds:cache:purge -a tucita-app                ?
?  2. git push heroku master                                 ?
??????????????????????????????????????????????????????????????

??????????????????????????????????????????????????????????????
?  PROBLEMA: App no inicia                                   ?
??????????????????????????????????????????????????????????????
?  SOLUCIÓN:                                                 ?
?  1. heroku logs --tail -a tucita-app (ver error)           ?
?  2. heroku config -a tucita-app (verificar variables)      ?
?  3. heroku restart -a tucita-app                           ?
??????????????????????????????????????????????????????????????

??????????????????????????????????????????????????????????????
?  PROBLEMA: Error de base de datos                          ?
??????????????????????????????????????????????????????????????
?  SOLUCIÓN:                                                 ?
?  1. Verificar: heroku config:get DB_SERVER -a tucita-app   ?
?  2. Verificar firewall de AWS RDS permite Heroku           ?
?  3. Probar conexión manualmente                            ?
??????????????????????????????????????????????????????????????

??????????????????????????????????????????????????????????????
?  PROBLEMA: SSL no activo                                   ?
??????????????????????????????????????????????????????????????
?  SOLUCIÓN:                                                 ?
?  1. Esperar 24-48h propagación DNS                         ?
?  2. heroku certs:auto -a tucita-app (ver estado)           ?
?  3. heroku certs:auto:refresh -a tucita-app                ?
??????????????????????????????????????????????????????????????
```

---

## ?? CONFIGURAR DNS

```batch
???????????????????????????????????????????????
?  1. Obtener DNS target de Heroku           ?
???????????????????????????????????????????????
heroku domains -a tucita-app

Resultado: www.tucitaonline.org ? xxx-yyy.herokudns.com
                                   ??? Copia este valor

???????????????????????????????????????????????
?  2. Ir al panel de tu proveedor de dominio ?
???????????????????????????????????????????????
(GoDaddy, Namecheap, Cloudflare, etc.)

???????????????????????????????????????????????
?  3. Agregar registro CNAME                 ?
???????????????????????????????????????????????
Tipo: CNAME
Host: www
Valor: xxx-yyy.herokudns.com (de paso 1)
TTL: 3600

???????????????????????????????????????????????
?  4. Esperar propagación DNS                ?
???????????????????????????????????????????????
Tiempo: 24-48 horas (usualmente 2-4 horas)
Verificar: https://dnschecker.org
```

---

## ? CHECKLIST DE DESPLIEGUE

```
ANTES DEL DESPLIEGUE:
[ ] Heroku CLI instalado
[ ] Git configurado
[ ] Credenciales de BD listas
[ ] JWT key generada (32+ caracteres)
[ ] AWS S3 configurado (opcional)

DURANTE EL DESPLIEGUE:
[ ] Ejecutar deploy-to-heroku.bat
[ ] Ingresar todas las variables
[ ] git push heroku master exitoso
[ ] App arranca sin errores

DESPUÉS DEL DESPLIEGUE:
[ ] verify-deployment.bat ejecutado
[ ] Logs sin errores críticos
[ ] App accesible en heroku.com
[ ] DNS configurado
[ ] SSL activo
[ ] App accesible en tucitaonline.org
```

---

## ?? ARCHIVOS IMPORTANTES

```
CONFIGURACIÓN DE HEROKU (No modificar - ya optimizados):
??? Dockerfile              ? Instrucciones de build Docker
??? heroku.yml             ? Configuración de Heroku
??? .dockerignore          ? Archivos a ignorar en build
??? Procfile               ? Comando de inicio
??? appsettings.Production.json ? Configuración de producción

SCRIPTS PARA WINDOWS:
??? deploy-to-heroku.bat   ? Setup inicial (ejecutar una vez)
??? update-app.bat         ? Actualizar app (ejecutar cada cambio)
??? verify-deployment.bat  ? Verificar despliegue

DOCUMENTACIÓN:
??? GUIA-SIMPLE-HEROKU.md  ? ? Guía para principiantes (EMPIEZA AQUÍ)
??? CHEATSHEET.md          ? Este archivo (comandos rápidos)
??? DEPLOYMENT.md          ? Guía técnica completa
??? DOMAIN-SETUP.md        ? Configurar www.tucitaonline.org
??? ROUTING.md             ? Arquitectura de routing
??? QUICK-COMMANDS.md      ? Referencia de comandos
??? CHANGELOG.md           ? Historial de cambios
??? README.md              ? Información general del proyecto

PLANTILLAS:
??? .env.example           ? Plantilla de variables de entorno
```

---

## ?? ¿NECESITO SABER DOCKER?

```
?????????????????????????????????????????????????????????
?                                                       ?
?         ? NO NECESITAS SABER DOCKER ?               ?
?                                                       ?
?  Heroku maneja Docker automáticamente cuando haces:  ?
?                                                       ?
?         git push heroku master                        ?
?                                                       ?
?  Tú solo necesitas saber Git (que ya usas)           ?
?                                                       ?
?????????????????????????????????????????????????????????
```

---

## ?? FLUJO DE TRABAJO DIARIO

```batch
???????????????????????????????????????????????
?  DESARROLLO LOCAL                          ?
???????????????????????????????????????????????
cd TuCita
dotnet run

cd ClientApp
npm run dev

???????????????????????????????????????????????
?  CUANDO TERMINES DE DESARROLLAR            ?
???????????????????????????????????????????????
update-app.bat

???????????????????????????????????????????????
?  VERIFICAR EN PRODUCCIÓN                   ?
???????????????????????????????????????????????
heroku open -a tucita-app
heroku logs --tail -a tucita-app
```

---

## ?? AYUDA

```
¿Build falla?          ? Ver logs: heroku logs --tail -a tucita-app
¿App no inicia?        ? Reiniciar: heroku restart -a tucita-app
¿SSL no activo?        ? Esperar DNS + heroku certs:auto -a tucita-app
¿Variables faltantes?  ? Ver: heroku config -a tucita-app

Documentación completa: Ver archivos .md en la raíz del proyecto
```

---

## ?? URLs FINALES

```
???????????????????????????????????????????????
?  Desarrollo:  http://localhost:5000        ?
?  Heroku:      https://tucita-app.herokuapp.com ?
?  Producción:  https://www.tucitaonline.org ?
???????????????????????????????????????????????
```

---

**Versión**: 1.0  
**Última actualización**: 2024  
**Imprime este archivo para tenerlo a mano** ??
