version: 1
frontend:
  phases:
    preBuild:
      commands:
        # Navegar al directorio del frontend
        - cd ClientApp
        # Instalar dependencias usando npm ci (más rápido y determinístico)
        - npm ci
    build:
      commands:
        # Build de producción con Vite
        - npm run build
  artifacts:
    # Vite genera los archivos en el directorio 'dist' dentro de ClientApp
    baseDirectory: ClientApp/dist
    files:
      - '**/*'
  cache:
    paths:
      # Cachear node_modules para builds más rápidos
      - ClientApp/node_modules/**/*
